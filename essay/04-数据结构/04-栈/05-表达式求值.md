# 表达式求值

在计算机中，表达式可以有三种不同的标识方法，
不同的标识方法
设 Exp = s1 + op + s2
则称：
op + s1 + s2 为表达式的前缀表示法

s1 + s2 + op 为表达式的中缀表示法

s1 + s2 + op 为表达式的后缀表示法

例如： Exp = a * b + (c - d / e) * f

前缀式： + * a b * - c / d e f
中缀式： a * b + c - d / e * f
后缀式： a b * c d e / - f * +

结论：
1. 操作数之间的相对次序不变；
2. 运算符的相对次序不同；
3. 中缀式丢掉了括弧信息，致使运算的次序不确定；（中缀式是没有什么意义的。）
4. 前缀式的运算规则为：（唯一的确定了运算顺序）
    连续出现的两个操作数和在他们之前且紧靠着他们的运算符构成一个最小的表达式
5. 后缀式的运算规则为：（运算符的顺序正好是运算次序，计算机处理起来比较方便，很多编译程序中表达式用后缀式）
    运算符在式中出现的顺序恰为表达式的运算顺序，
    每个运算符和在它之前出现且紧靠它的两个操作数构成一个最小表达式


如何从后缀式求值？
    先找运算符，
    再找操作数

思路：
后缀式本身是操作数在前运算符在后，
碰到操作数要保留，保留在一个栈里。

=================================================
如图：05-后缀式解析.png
碰到操作数，还不知道怎么运算，要保留，保留在栈中。把a入栈。
同样b进栈，
现在碰到*了，*就要做运算了。
取出a和b，将a*b的结果入栈，

总结：
操作数入栈，碰到运算符计算，结果入栈。

===============================================

怎么从表达式得到后缀式？
分析原表达式和后缀式中的运算符
原表达式: a + b * c - d / e * f
  后缀式：a b c * + d e / f * -

只有当后面的操作符确定了之后，才可以知道前面是怎么回事。
每次运算符出来的时候，都是暂时的保留一下，

操作数的顺序是不变的，
对于操作数
要进入后缀式
，操作符，每出来的时候，要给它保留一下。
+出来，我保留下来，等到*出来的时候，那么* + 就可以比较了，*先做，但是*是不是先于后面做，所以也要保留。
后面出来的是-，那么*在-之前，所以，这个*要出来，
到后缀式里去
。那么就剩下，- +的关系了，先左后右，所以+在-之前，
+
进入后缀式，
-要保留一下，

综上，对于运算符的保留要用到栈，又是一个后进先出的情况。

=============================================================
如图：（左边的只是一个普通的表达式存储，右边的才是栈结构）
05-怎么从表达式得到后缀式解析.png
05-怎么从表达式得到后缀式解析2.png
05-怎么从表达式得到后缀式解析3.png
05-怎么从表达式得到后缀式解析4.png
===================================================================
从这的分析来看，表达式变后缀式的规律：
每个运算符的运算次序要由他之后的一个运算符来定，在后缀式中，优先数高的运算符领先于优先数低的运算符。
从原表达式求得后缀式的规律为：
1. 设立操作符栈
2. 设表达式的结束符为#，予设运算符栈的栈底为#
3. 若当前字符是操作符，则直接发送给后缀式
4. 若当前运算符的优先数高于栈顶运算符则进栈；
5. 否则，退出栈顶运算符发送给后缀式；
6. (对它之前后的运算符起隔离作用，)可视为自相应左括弧开始的表达式