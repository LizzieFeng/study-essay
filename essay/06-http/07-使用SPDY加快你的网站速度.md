# 使用SPDY加快你的网站速度

2012年google如一声惊雷提出了SPDY的方案，大家才开始从正面看待和解决老版本HTTP协议本身的问题，SPDY可以说是综合了HTTPS和HTTP两者有点于一体的传输协议，主要解决：

1. 降低延迟，
    针对HTTP高延迟的问题，SPDY优雅的采取了多路复用（multiplexing）。
    多路复用通过多个请求stream共享一个tcp连接的方式，解决了HOL blocking的问题，降低了延迟同时提高了带宽的利用率。
2. 请求优先级（request prioritization）。
    多路复用带来一个新的问题是，在连接共享的基础之上有可能会导致关键请求被阻塞。
    SPDY允许给每个request设置优先级，这样重要的请求就会优先得到响应。
    比如浏览器加载首页，首页的html内容应该优先展示，之后才是各种静态资源文件，脚本文件等加载，这样可以保证用户能第一时间看到网页内容。
3. header压缩。
    前面提到HTTP1.x的header很多时候都是重复多余的。
    选择合适的压缩算法可以减小包的大小和数量。
4. 基于HTTPS的加密协议传输，大大提高了传输数据的可靠性。
5. 服务端推送（server push），
    采用了SPDY的网页，例如我的网页有一个sytle.css的请求，在客户端收到sytle.css数据的同时，服务端会将sytle.js的文件推送给客户端，当客户端再次尝试获取sytle.js时就可以直接从缓存中获取到，不用再发请求了。SPDY构成图：
    
    07-SPDY构成图.jpg

    SPDY位于HTTP之下，TCP和SSL之上，这样可以轻松兼容老版本的HTTP协议(将HTTP1.x的内容封装成一种新的frame格式)，同时可以使用已有的SSL功能。

     由于SPDY并不是一个标准协议，后来SPDY也未能单独成为正式标准，不过SPDY开发组的成员全程参与了HTTP2.0的制定过程。SPDY也有自己的兼容性问题，在HTTP2.0出来之后，大部分浏览器将不在支持。
     07-SPDY浏览器兼容情况.jpg