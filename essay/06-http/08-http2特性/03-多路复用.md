# 多路复用

多路复用，代替原来的序列和阻塞机制。
所有就是请求的都是通过一个 TCP连接并发完成。
 HTTP 1.x 中，如果想并发多个请求，必须使用多个 TCP 链接，且浏览器为了控制资源，还会对单个域名有 6-8个的TCP链接请求限制，如下图，红色圈出来的请求就因域名链接数已超过限制，而被挂起等待了一段时间：如 03-请求就因域名链接数已超过限制.jpg

在 HTTP/2 中，有了二进制分帧之后，HTTP /2 不再依赖 TCP 链接去实现多流并行了，
在 HTTP/2中：
    同域名下所有通信都在单个连接上完成。
    单个连接可以承载任意数量的双向数据流。
    数据流以消息的形式发送，而消息又由一个或多个帧组成，多个帧之间可以乱序发送，因为根据帧首部的流标识可以重新组装。
这一特性，使性能有了极大提升：
1. 同个域名只需要占用一个 TCP 连接，消除了因多个 TCP 连接而带来的延时和内存消耗。
2. 单个连接上可以并行交错的请求和响应，之间互不干扰。
3. 在HTTP/2中，每个请求都可以带一个31bit的优先值，0表示最高优先级， 数值越大优先级越低。
    有了这个优先值，客户端和服务器就可以在处理不同的流时采取不同的策略，以最优的方式发送流、消息和帧。